function updateTargetElement(t,e,s,o){var n=0,i=1,a=e.length;0==a&&feba.domManipulator.disableField(t);for(var r,l,p=0;a>p;p++){var h=e[p];h[n].match(Constants.TARGET)?r=h[i]:h[n].match(s)&&(l=h[i])}setTarget(t,l,o,r)}function getTarget(t){var e=feba.domManipulator.getElementById(t)[0];return e||(e=feba.domManipulator.getElementByName(t)[0]),e}function setDefault(t,e){var s,o=e.split("|"),n=o[0];return o.length>1&&(s=o[1]),new Option(getMessage(n),s)}function setTarget(t,e,s,o){var n=t.type;switch(n){case Constants.SIMPLE_SELECT:setTargetToSimpleSelect(t,e,s,o);break;case Constants.MULTIPLE_SELECT:setTargetToMultipleSelect(t,e,s,o);break;case Constants.TEXTFIELD:setTargetToText(t,e);break;case Constants.RADIO:setTargetToRadioButton(t,e);break;default:t.innerHTML=e}}function setTargetToSimpleSelect(t,e,s,o){var n=getSelectedValues(t,o);t.options.length=0,t.disabled=!1;var i=1;"|"==s?i=0:t.options[0]=setDefault(t,s),e&&feba.domManipulator.each(e,function(e,s){t.options[i]=LIB.__GET_OPTIONS_BY_SPLIT__(s),null!=n&&n==t.options[i].value&&(t.options[i].selected=!0),i++})}function setTargetToMultipleSelect(t,e,s,o){var n=getSelectedValues(t,o);t.options.length=0,t.disabled=!1,t.options[0]=setDefault(t,s);var i=1;0!=n.length&&feba.domManipulator.each(n,function(e,s){return s==t.options[0].value?void(t.options[0].selected=!0):void 0}),e&&feba.domManipulator.each(e,function(e,s){t.options[i]=LIB.__GET_OPTIONS_BY_SPLIT__(s),0!=n.length&&feba.domManipulator.each(n,function(e,s){return s==t.options[i].value?void(t.options[i].selected=!0):void 0}),i++})}function setTargetToRadioButton(t,e){var s=feba.domManipulator.getElementByName(t.name);feba.domManipulator.each(s,function(t){s[t].checked=!1,s[t].value==e&&(s[t].checked=!0)})}function setTargetToText(t,e){e=jQuery("<div></div>").html(e).text(),t.value=e}function getSelectedValues(t,e){var s="";if(e){var o=Constants.TARGET+"_"+t.id;e[o]&&(s=e[o])}return s}function checkCanRaiserequest(t){if(this.options=t,feba.domManipulator.hasValue(LIB.__GET_DOM__(this.options.source))){if(LIB.__GET_DOM__(this.options.source).type!=Constants.RADIO||1==LIB.__GET_DOM__(this.options.source).checked)return!0}else removeTarget(this.options.target);return!1}function removeTarget(t){for(var e=t.split(","),s=e.length,o=0;s>o;o++)-1!=e[o].indexOf("=")&&(targetElementArray=e[o].split("="),2==targetElementArray.length&&(target=LIB.__GET_DOM__(targetElementArray[0]),target||(target=feba.domManipulator.getElementEndingWith(targetElementArray[0])[0]),target.type==Constants.TEXTFIELD?target.value="":target.type==Constants.SIMPLE_SELECT?(target.options.length=0,target.options[0]=setDefault(target,"Select|"),target.options[0].selected=!0):target.type==Constants.RADIO?(target=feba.domManipulator.getElementByName(target.name),feba.domManipulator.each(target,function(t){target[t].checked=!1})):target.innerHTML=""))}function createModal(t){if(null==t.content||0==t.content.length)throw new Exception("Invalid content was returned");containerDiv=feba.domManipulator.getElementById(t.modalDataId),containerDiv.children().remove(),containerDiv.append(t.content)}var AJAX_DEFAULT_PARAMETER="ajaxParameter",AJAX_DEFAULT_PARAMETER_REGEXP=new RegExp("(\\{"+AJAX_DEFAULT_PARAMETER+"\\})","g"),AJAX_PARAM_SPECIFICATION=["criteria","parameters","filter"],_GROUPLETS_IN_PAGE_="";feba.js.ajax={name:"feba.js.ajax",description:"",version:"1.0",ajaxObjects:[],startFlag:!0,add:function(t){LIB.__ADD__(this.ajaxObjects,t)},remove:function(t){LIB.__REMOVE__(this.ajaxObjects,t)},startRequest:function(){LIB.__START__.bind(this)(this.ajaxObjects,feba.js.startFlag)},stopRequest:function(){LIB.__STOP__.bind(this)(this.ajaxObjects)},isRunning:function(){LIB.__IS_RUNNING__.bind(this)()},startEventListening:function(t){LIB.__START_EVENT_LISTENING__(t)},stopEventListening:function(){LIB.__STOP_EVENT_LISTENING__(object)},toString:function(){return this.name+LIB.__TO_STRING__(this.ajaxObjects)}},feba.js.add(feba.js.ajax),feba.js.ajax.groupletCounter=0;var AJAX_CALLOUT_OVERLIB_DEFAULT="STICKY,CLOSECLICK,DELAY,250,TIMEOUT,5000,VAUTO,WRAPMAX,240,CSSCLASS,FGCLASS,'olfg',BGCLASS,'olbg',CGCLASS,'olcg',CAPTIONFONTCLASS,'olcap',CLOSEFONTCLASS,'olclo',TEXTFONTCLASS,'oltxt'";feba.domManipulator.createBaseClass("feba.js.ajax.base",{},{init:function(){},name:"feba.js.ajax.base",description:"",version:"1.0",startFlag:!0,ajaxTimeout:24e4,setAjaxHandlerFunctions:function(){this.options.onError&&this.onError?this.options.error=function(t,e,s){this.options.onError(t,e,s),this.onError(t,e,s)}:!this.options.onError&&this.onError?this.options.error=function(t,e,s){this.onError(t,e,s)}:this.options.onError&&!this.onError&&(this.options.error=function(t,e,s){this.options.onError(t,e,s)}),this.options.onSuccess&&this.onSuccess?this.options.success=function(t,e,s){this.options.onSuccess(t,e,s),this.onSuccess(t,e,s)}:!this.options.onSuccess&&this.onSuccess?this.options.success=function(t,e,s){this.onSuccess(t,e,s)}:this.options.onSuccess&&!this.onSuccess&&(this.options.success=function(t,e,s){this.options.onSuccess(t,e,s)}),this.options.onComplete&&this.onComplete?this.options.complete=function(t,e){this.options.onComplete(t,e),this.onComplete(t,e)}:!this.options.onComplete&&this.onComplete?this.options.complete=function(t,e){this.onComplete(t,e)}:this.options.onComplete&&!this.onComplete&&(this.options.complete=function(t,e){this.options.onComplete(t,e)})},startRequest:function(){LOG.logMessages("Starting "),feba.js.ajax.startFlag&&(this.startFlag=!0)},setListeners:function(){var t=this.options,e=t.source;if(null!=e)if(-1!=e.indexOf("[]")){if(!t.startIndex||!t.endIndex)throw new Error("startIndex,endIndex should be passed");for(var s=[],o=t.startIndex;o<t.endIndex;o++){s[o]=new Object,s[o].modalObj=this;var n=e.replace("[]","["+o+"]");s[o].currentIndex=o;var i=feba.domManipulator.getElementById(n);if(i){var a=this;feba.domManipulator.bind(i,t.eventType,{currentIndex:o},function(t){a.executeEvent.apply(s[t.data.currentIndex]),t.preventDefault()})}}}else{var s=new Object;s.modalObj=this;var i=feba.domManipulator.getElementById(t.source);if(i.length){var a=this;feba.domManipulator.bind(i,t.eventType,{},function(t){return a.execute.apply(s.modalObj),!1})}}},handleErrors:function(t,e,s,o){LIB.__HANDLE_ERROR__(this.riaFeatureID,t,e,s,o,!1,this.source)},stopRequest:function(){LOG.logMessages("Stopping "),this.startFlag=!1},initRequest:function(){if("function"==typeof this.options.onCreate){var t=this.options.onCreate();if(typeof t===Constants.STRING&&Constants.CANCEL===t.toLowerCase())return!1}return!0},getOptions:function(t,e){null==this.options.requestId||this.options.isGrouplet||(this.options.requestId=parseInt(this.options.requestId,10)+1);var s=this.options.requestId;return feba.domManipulator.extendObject({async:this.options.asynchronous||!0,type:this.options.type||"post",evalScripts:this.options.evalScripts||!1,data:this.options.groupletParameters||this.buildParameterString(e),onFailure:this.options.onFailure,onComplete:this.options.onComplete,cache:!1,beforeSend:function(t){t.setRequestHeader("requestId",s)}},t||{})},buildParameterString:function(t){var e,s,o,n,i="",a="eventType",r="onLoad",l=null,p=null,h=null,d=null,u=this.replaceAJAX_DEFAULT(t)||"";if(u=u.split(Constants.PARAMETERS_SEPERATOR),feba.domManipulator.each(u,function(t,e){0!==feba.domManipulator.trim(e).length&&(e=e.split("="),p=feba.domManipulator.trim(e[0]),d=feba.domManipulator.trim(e[1]),h=[],Constants.STRING===typeof d&&feba.domManipulator.trim(d).length>0&&(l=d.match(/\{[\w\.:\(\)\[\]]*\}/g),l=l?LIB.__GET_DOM__(l[0].substring(1,l[0].length-1)):feba.domManipulator.getElementByName(n)[0]),l?Constants.MULTIPLE_SELECT===l.type?(o=feba.domManipulator.serialize(feba.domManipulator.getElement(l)))&&(i+="&"+o):l.type==Constants.TEXTFIELD||"textarea"==l.type||"password"==l.type||"hidden"==l.type||l.type==Constants.SIMPLE_SELECT||"checkbox"===l.type?h.push(l.value):Constants.RADIO===l.type?h.push(feba.domManipulator.getAttribute(feba.domManipulator.getElementByName(l.name),"value")):h.push(l.innerHTML):0!=d.indexOf("{")&&d.indexOf("}")!=d.length-1&&h.push(d),feba.domManipulator.each(h,function(t,e){i+="&"+p+"="+d.replace(d.match(/\{[\w\.:\(\)\[\]]*\}/g),encodeURIComponent(e))}))}),this.options.scope&&(i+="&scope="+encodeURIComponent(this.options.scope)),i=this.setErrorAttributeDetails(i),i=this.setExtraParams(i),"&"===i.charAt(0)&&(i=i.substr(1)),null!=this.options.paramkey&&"parameters"!=this.options.paramkey){for(var c,m=i.split(Constants.AMPERSAND),g={},f=m.length,b=0;f>b;b++)c=m[b].split("="),g[c[0]]=c[1];i=this.options.paramkey+"="+feba.domManipulator.stringify(g)}return e=this.options.executeOnLoad,s=this.options.target,s&&(i+=Constants.AMPERSAND+Constants.TARGET+"="+s),e&&(i+=Constants.AMPERSAND+a+"="+r,this.options.executeOnLoad=!1),i=this.setErrorAttributeDetails(i),i+="&requestId="+this.options.requestId},setErrorAttributeDetails:function(t){var e=this.options.forcontrolIDs;return this.options.errorFormatter&&(t+="&errorFormmater="+encodeURIComponent(formmater)),e&&(t+="&errorForConntrolIds="+encodeURIComponent(e)),t},setExtraParams:function(t){var e=_GROUPLETS_IN_PAGE_;return this.options.isGrouplet&&(t+="&GROUPLETS_IN_PAGE="+encodeURIComponent(e)),t},replaceAJAX_DEFAULT:function(t){for(var e=this.options,s=0;s<AJAX_PARAM_SPECIFICATION.length;s++){var o=AJAX_PARAM_SPECIFICATION[s];if(e[o])return this.options.paramkey=o,e[o]}return null},toString:function(){return this.name+LIB.__TO_STRING__(this.options)}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.ajaxRequest",{},{init:function(t,e){if(LOG.logMessages("In Ajax request initialize method"),arguments.length<1)return LOG.logMessages("Returning null ,arguments are null"),null;if(this.options=t,t={},!this.initRequest()&&!this.startFlag)return LOG.logMessages("Returning null"),null;var s=this,o=function(t,e,s,o){var n=o.getResponseHeader(Constants.RESPONSE_TYPE);n&&t.options.changeParser&&t.options.parser.type!==n&&(t.options.parser=new LIB.Parser("JSP"===n?"html":void 0)),null!=o.getResponseHeader("action")&&"JSON"==o.getResponseHeader("OPFMT")&&(t.options.parser=new LIB.Parser(Constants.JSON)),t.options.XMLHttpRequest=o,t.options.parser.load(o,t),"MODAL_VIEW.TagHelper"==t.options.tagHelper||"MODAL_VIEW_CONTAINER"==t.options.modalDataId?(t.options.success&&t.options.success.call(t.options.child,e,s,o),t.options.handler(t.options)):(t.options.handler(t.options),t.options.success&&t.options.success.call(t.options.child,e,s,o))},n=function(t,e,s){t.options.complete&&t.options.complete.call(t.options.child,e,s)},i=function(t,e,s,o){t.options.error&&t.options.error.call(t.options.child,e,s,o)},a={success:function(t,e,n){o(s,t,e,n)},complete:function(t,e){n(s,t,e)},error:function(t,e,o){i(s,t,e,o)}};return feba.domManipulator.extendObject(a,this.getOptions(t,e)),"UnitTesting"===CONFIG.operatingMode?(LOG.logMessages("In Testing mode :Dummy Request is raised"),t.onSuccess(),null):(a.timeout=this.ajaxTimeout,a.url=this.options.baseUrl,a.scope=this.options.scope,feba.domManipulator.ajax(a))}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.validatorResponder",{},{init:function(t){this.validateURL(t)},validateURL:function(t){if(null===t.baseUrl||void 0===typeof t.baseUrl||0===feba.domManipulator.trim(t.baseUrl).length)throw new Error("url is wrong/empty")},validateId:function(){}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.autoComplete",{},{init:function(t){this.name="feba.js.ajax.autoComplete",this.version="1.0",this.description="",LOG.logMessages("Initializing the JavaScriptObject "),feba.js.ajax.add(this),this.setOptions(t),this.execute()},setOptions:function(t){t.errorFormatter=encodeURIComponent(t.errorFormatter),t.forcontrolIDs=encodeURIComponent(t.forcontrolIDs),this.options=feba.domManipulator.extendObject({divElement:"ajaxAuto_"+t.source,requestId:0,forcontrolIDs:t.forcontrolIDs,errorFormatter:t.errorFormatter},t||{}),LOG.logMessages("In SetOptions method , options are set")},execute:function(){LOG.logMessages("In Execute method,instantiating AutoCompleter object");var t=feba.domManipulator.getElementById(this.options.source);this.options.sourceName=feba.domManipulator.getAttribute(t,"name");var e=this;t.autocomplete(this.options.baseUrl,{minChars:this.options.minimumCharacters,dataType:Constants.JSON,cacheLength:0,parse:function(t){var s=new LIB.Parser(Constants.JSON_TO_HTML_LIST,!0),o=s.parse(null,t),n=o[0],i=o[1],a=e.options.groupletId,r=e.options.displayExceptions;return e.handleErrors(n,i,a,r,e),"0000"===String(o[4])?(t=o[3],feba.domManipulator.map(t,function(t){return t=t.split("|")[1],{data:t,value:t,result:t}})):void 0},extraParams:{source:this.options.sourceName,Requestid:0,errorFormatter:this.options.errorFormatter,errorForConntrolIds:this.options.forcontrolIDs},formatItem:function(t){return t}})},toString:function(){return this.name+LIB.__TO_STRING__(this.options)}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.callout",{},{init:function(t){this.name="feba.js.ajax.callout",this.version="1.0",this.description="",LOG.logMessages("Initializing the JavaScriptObject"),feba.js.ajax.add(this),this.setOptions(t),this.setListeners(),this.registerCallout()},setOptions:function(t){this.options=feba.domManipulator.extendObject({parameters:"",overlib:AJAX_CALLOUT_OVERLIB_DEFAULT,parser:new LIB.Parser(Constants.JSON),openEvent:"mouseover",onFocus:"focus",handler:this.handler,child:this,requestId:0},t||{}),this.options.originalParams=this.options.parameters||this.options.criteria,LOG.logMessages("In SetOptions method , options are set"),this.options.handleErrors=this.handleErrors,this.setAjaxHandlerFunctions(),this.options.child=this},setListeners:function(){LOG.logMessages("In SetListeners method, eventListener has been added to element",this.options.source);var t=this.options,e=t.source;if(-1!=e.indexOf("[]")){if(!t.startIndex||!t.endIndex)throw new Error("startIndex,endIndex should be passed");for(var s=[],o=t.startIndex;o<t.endIndex;o++){s[o]=new Object,s[o].modalObj=this;var n=e.replace("[]","["+o+"]");s[o].currentIndex=o;var i=feba.domManipulator.getElementById(n);if(i){var a=this;feba.domManipulator.bind(i,this.options.openEvent,{currentIndex:o},function(t){a.calloutOpen.apply(s[t.data.currentIndex])}),feba.domManipulator.bind(i,this.options.onFocus,{currentIndex:o},function(t){a.calloutOpen.apply(s[t.data.currentIndex])})}}}else{var s=new Object;s.modalObj=this;var i=feba.domManipulator.getElementById(t.source);if(i){var a=this;feba.domManipulator.bind(i,this.options.openEvent,{},function(){a.calloutOpen.apply(s)}),feba.domManipulator.bind(i,this.options.onFocus,{},function(){a.calloutOpen.apply(s)})}}},registerCallout:function(){var t=this.options,e=t.source;if(-1!=e.indexOf("[]")){if(!t.startIndex||!t.endIndex)throw new Error("startIndex,endIndex should be passed");for(var s=[],o=t.startIndex;o<t.endIndex;o++){s[o]=new Object,s[o].modalObj=this;var n=e.replace("[]","["+o+"]");s[o].currentIndex=o;var i=feba.domManipulator.getElementById(n);i&&feba.domManipulator.showCallout({eventElement:i})}}},calloutOpen:function(t){if(this.modalObj.options.originalParams&&-1!=this.modalObj.options.originalParams.indexOf("[]")){var e=this.modalObj.options.originalParams.replace(/\[\]/g,"["+this.currentIndex+"]");this.modalObj.options.parameters?this.modalObj.options.parameters=e:this.modalObj.options.criteria=e}this.modalObj.execute.call(this.modalObj)},execute:function(t){LOG.logMessages("In event handler Execute method,raising the request "),this.request=new feba.js.ajax.ajaxRequest(this.options)},handler:function(){LOG.logMessages("In handler method, Displays the pop-up ");var t=this.parser.content[0][1],e=this.parser.content[1][1],s=this.groupletId,o=this.displayExceptions;if(this.handleErrors(t,e,s,o),"0000"===String(this.parser.content[2][1])){var n=this.parser.content[4][1];if(this.response=this.parser.content[5][1],n==this.requestId){var i=String(this.parameters).split("=")[1];i=i.slice(1,i.length-1),this.response=String(this.response).split("|")[0],this.calloutDescription&&(this.response=this.calloutDescription+":"+this.response),feba.domManipulator.showCallout({eventElement:feba.domManipulator.getElementById(i),response:this.response})}}},toString:function(){return this.name+LIB.__TO_STRING__(this.options)}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.grouplet",{},{init:function(t){this.setOptions(t),this.isFirstResponse=Constants.TRUE,this.minimize=Constants.TRUE,this.options.target&&(feba.js.ajax.groupletCounter=feba.js.ajax.groupletCounter+1,_GROUPLETS_IN_PAGE_=_GROUPLETS_IN_PAGE_+","+this.options.target),this.setListeners(),this.options.defaultLoad!=Constants.FALSE&&this.execute(),feba.domManipulator.addClass(feba.domManipulator.getElementById(this.options.target),"empty-widget")},setOptions:function(t){this.options=feba.domManipulator.extendObject({close:t.imageClose,evalScripts:!0,eventType:"click",type:"post",handler:this.handler,isGrouplet:!0,defaultLoad:!0,setResponse:this.setResponse,parser:new LIB.Parser("htmltoelementlist"),requestId:t.groupletStackCounter||0,isRequestInProcess:!1,actionElement:"onload",child:this,isIGC:"N"},t||{}),this.setAjaxHandlerFunctions(),this.options.onComplete=this.onComplete,this.options.isFirstRequest=!0,this.options.viewStack=new Map,this.options.child=this,this.options.originalURL=this.options.baseUrl},onComplete:function(){jQuery("#"+this.options.target+" select").sSelect(),feba.domManipulator.css(feba.domManipulator.getElementById(this.options.target),"backgroundImage",""),this.isFirstResponse===Constants.TRUE&&(this.isFirstResponse=Constants.FALSE,menuActionBind(this.options.target))},setListeners:function(){var t=this.options.target;registerMenuHandler(t)},closeGrouplet:function(){feba.js.ajax.groupletCounter=feba.js.ajax.groupletCounter-1;var t=!0;if(0===feba.js.ajax.groupletCounter&&(t=confirm(getMessage("LastWidget"))),t){var e="";if(this.options.title&&(e=this.options.title),this.options.removeUrl){var s=new feba.js.ajax.rpcRequest({JSObjectName:"FEBA.JS.Ajax.RPCRequest",baseUrl:this.options.removeUrl+"&__TARGET_GROUPLET__="+this.options.target+"&__REMOVE_GROUPLET__=true",criteria:this.options.criteria,displayExceptions:!1,onFailure:function(){widgetConfRemoveFail()}});s.execute()}feba.domManipulator.remove(feba.domManipulator.getElementById(this.options.removeGroupletSrc)),0===feba.js.ajax.groupletCounter&&LIB.__HANDLE_ERROR__(null,'<div role = "//alert" class="redbg"><a id="errorlink1" href="#"><img class="absmiddle" title="'+getMessage("NoWidgetsTitle")+'" alt="'+getMessage("NoWidgetsAlt")+'" src="'+getMessage("NoWidgetsImageSrc")+'"></a><span dir="ltr">[CONTLS0004] [100053] </span>'+getMessage("NoWidgets")+"</div>",null,null,"true",!0)}else feba.js.ajax.groupletCounter=feba.js.ajax.groupletCounter+1},toggleGrouplet:function(){this.titleForMinimize,this.minimize===Constants.TRUE?(this.minimize=Constants.FALSE,this.titleForMinimize=feba.domManipulator.getAttribute(feba.domManipulator.getElementById(this.options.target+"_Toggle"),"title"),feba.domManipulator.getElementById(this.options.target).slideUp("300"),feba.domManipulator.setAttribute(feba.domManipulator.getElementById(this.options.target+"_Toggle_img"),"src",imagePath+"/widget-maximize.gif"),feba.domManipulator.setAttribute(feba.domManipulator.getElementById(this.options.target+"_Toggle_img"),"title",getMessage("TitleForMaximize")),feba.domManipulator.setAttribute(feba.domManipulator.getElementById(this.options.target+"_Toggle"),"title",getMessage("TitleForMaximize")),feba.domManipulator.setAttribute(feba.domManipulator.getElementById(this.options.target+"_Toggle_img"),"alt",getMessage("TitleForMaximize"))):(this.minimize=Constants.TRUE,feba.domManipulator.getElementById(this.options.target).slideDown("300"),feba.domManipulator.setAttribute(feba.domManipulator.getElementById(this.options.target+"_Toggle_img"),"src",imagePath+"/Toggle.gif"),feba.domManipulator.setAttribute(feba.domManipulator.getElementById(this.options.target+"_Toggle_img"),"title",this.titleForMinimize),feba.domManipulator.setAttribute(feba.domManipulator.getElementById(this.options.target+"_Toggle_img"),"alt",this.titleForMinimize),feba.domManipulator.setAttribute(feba.domManipulator.getElementById(this.options.target+"_Toggle"),"title",this.titleForMinimize))},execute:function(){feba.domManipulator.setCssProperties(feba.domManipulator.getElementById(this.options.target),{backgroundImage:"url("+this.options.loadingImage+")",backgroundRepeat:"no-repeat",backgroundPosition:"center"}),this.options.isRequestInProcess||(this.options.isRequestInProcess=!0,this.request=new feba.js.ajax.ajaxRequest(this.options))},handler:function(){if(null!=this.parser&&null!=this.parser.content){this.content=this.parser.content[0],contentLength=this.content.length;for(var t=new Map,e=this.parser.content[1],s=0;s<e.length;s++)if(""!=e[s]){var o=e[s].split("=");t.put(o[0].trim(),o[1])}for(var n=0;n<contentLength;n++){var i=feba.domManipulator.getAttribute(this.content[n],Constants.GROUPLET_ID_ATTR);if(i){var a=feba.domManipulator.getChildren(this.content[n],"."+Constants.CROSS_SELL_GROUPLET);0!=a.length&&(feba.domManipulator.getElementById(Constants.CROSS_SELL_CONTAINER).append(a),menuActionBind(i),feba.features[i]&&(feba.features[i].options.isIGC="Y",feba.features[i].options.requestId=0))}if(feba.features[i]){var o=t.get(i);LOG.logMessages("requestId value in handler method of Grouplet: "+o),o=parseInt(o),feba.features[i].setResponse(feba.features[i].options,this.content[n],o,this.parser.content[2],i)}}this.isRequestInProcess=!1,handleTargetGrouplets(this),feba.domManipulator.disableCutCopyPaste(i)}},setResponse:function(t,e,s,o,n){function i(t,e,s,o,n){if(o&&-1!=o.indexOf(n))e.block({message:Constants.RELOADING_MESSAGE,css:{border:"3px solid"}}),t.requestId=parseInt(t.requestId,10)+1,t.refreshPage.call(feba.features[n]);else{var i=document.getElementById(feba.domManipulator.getAttribute(e,"id"));i.innerHTML=s.innerHTML,e.block({message:Constants.PROCESSING_MESSAGE,css:{border:"1px solid",background:"white url(consumer/images/spinner.gif) 50% center no-repeat",backgroundColor:"#f00",height:"15%"}})}}if(LOG.logMessages(n+" request ID check: "+(s==parseInt(t.requestId,10)+1)),t.originalContent=e.innerHTML,("Y"==t.isIGC||1==t.updateParentAction)&&(t.updateParentAction=!1,t.requestId=s-1),target=feba.domManipulator.getElementById(t.target),target)if(LOG.logMessages("View Stack Size in setResponse: "+t.viewStack.size()),t.viewStack.size()>0){if(i(t,target,e,o,n),t.requestId=parseInt(t.requestId,10)+1,t.viewStack.get(parseInt(t.requestId,10)+1)){var a=t.viewStack.get(parseInt(t.requestId,10)+1);t.viewStack.remove(parseInt(t.requestId,10)+1),setTimeout(function(){t.setResponse(t,a,s+1)},1e4)}}else{if(LOG.logMessages("Exception grouplets Logic:"+(o&&-1!=o.indexOf(n))),o&&-1!=o.indexOf(n))return target.block({message:Constants.RELOADING_MESSAGE,css:{border:"3px solid"}}),t.requestId=parseInt(t.requestId,10)+1,void t.refreshPage.call(feba.features[n]);LOG.logMessages("Else logic where response gets appended"),feba.domManipulator.remove(feba.domManipulator.children(target)),feba.domManipulator.append(target,e),feba.features[o]&&(feba.domManipulator.remove(feba.domManipulator.children(feba.domManipulator.getElementById(feba.features[o].options.target))),feba.domManipulator.getElementById(feba.features[o].options.target).block({message:Constants.RELOADING_MESSAGE,css:{border:"3px solid"}}),feba.features[o].options.requestId=0,feba.features[o].execute()),t.requestId=parseInt(t.requestId,10)+1,feba.features[n].options.isCsus&&(feba.features[n].options.requestId=s)}t.isIGC="N"},onError:function(t,e,s){switch(e){case"timeout":case"error":case"abort":case"parsererror":default:this.handleTimeout(t,e,s)}},removeTargetsChildren:function(){var t=feba.domManipulator.getElementById(this.options.target);feba.domManipulator.remove(feba.domManipulator.children(t))},handleTimeout:function(t,e,s){this.onComplete(),this.options.isRequestInProcess=!1;var o=feba.domManipulator.getElementById(this.options.target);feba.domManipulator.append(o,formWidgetErrorPage(e,"feba.features['"+this.options.target+"'].removeTargetsChildren();feba.features['"+this.options.target+"'].execute();"))}});var temp={counter:0};feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.periodicalUpdater",{},{init:function(t){this.name="feba.js.ajax.periodicalUpdater",this.tempCounter=temp.counter,this.tempName=this.name+temp.counter,temp[this.tempName]=this,temp.counter++,this.version="1.0",this.description="",LOG.logMessages("Initializing the JavaScriptObject "),feba.js.ajax.add(this),this.setOptions(t),this.execute()},setOptions:function(t){this.options=feba.domManipulator.extendObject({parser:new LIB.Parser(Constants.JSON),handler:this.handler,requestId:0,child:this},t||{}),this.decay=this.options.decay||2,this.frequency=this.options.frequency||15,this.options.handleErrors=this.handleErrors,this.options.handleErrors=this.handleErrors,this.setAjaxHandlerFunctions(),this.options.child=this,LOG.logMessages("In SetOptions method , options are set")},handler:function(){LOG.logMessages("In handler method rpcRequest, response is set to target "),this.content=this.parser.content;var t=this.target,e=this.content[0][1],s=this.content[1][1],o=this.groupletId,n=this.displayExceptions;if(this.handleErrors(e,s,o,n),"0000"===String(this.parser.content[2][1])){var i=this.content[4][1],a="",r="",l=this.content.length;if(0==t.length||-1==t.indexOf(",")&&-1==t.indexOf("=")){if(t=LIB.__GET_DOM__(this.target),!t)throw new Error("No Target");i==this.requestId&&(t.type==Constants.TEXTFIELD?t.value=this.content[5][1]:t.innerHTML=this.content[5][1])}else{a=t.split(",");for(var p=a.length,h=0;p>h;h++){if(-1==a[h].indexOf("="))throw new Error("Target pattern not proper");if(r=a[h].split("="),2!=r.length)throw new Error("Target pattern not proper");if(t=LIB.__GET_DOM__(r[0]),!t)throw new Error("No Target");if(i==this.requestId)for(var d=5;l>d;d++)r[1]==this.content[d][0]&&(t.type==Constants.TEXTFIELD?t.value=this.content[d][1]:t.innerHTML=this.content[d][1])}}}},execute:function(){LOG.logMessages("In event handler Execute method,raising the request "),this.request=new feba.js.ajax.ajaxRequest(this.options);var t=1e3*this.frequency;setTimeout('temp["'+this.tempName+'"].execute.apply(temp["'+this.tempName+'"])',t)},toString:function(){return this.name+LIB.__TO_STRING__(this.options)}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.rpcRequest",{},{init:function(t){this.name="feba.js.ajax.rpcRequest",this.version="1.0",this.description="",LOG.logMessages("Initializing the JavaScriptObject "),feba.js.ajax.add(this),this.setOptions(t),this.setListeners(),this.options.executeOnLoad&&this.execute()},setOptions:function(t){this.options=feba.domManipulator.extendObject({parser:new LIB.Parser(Constants.JSON),handler:this.handler,requestId:0,child:this},t||{}),LOG.logMessages("In SetOptions method , options are set"),this.options.originalParams=this.options.criteria||this.options.parameters,this.options.handleErrors=this.handleErrors,this.setAjaxHandlerFunctions(),this.options.child=this},executeEvent:function(){if(this.modalObj.options.originalParams&&-1!=this.modalObj.options.originalParams.indexOf("[]")){var t=this.modalObj.options.originalParams.replace(/\[\]/g,"["+this.currentIndex+"]");this.modalObj.options.parameters?this.modalObj.options.parameters=t:this.modalObj.options.criteria=t,this.modalObj.execute.call(this.modalObj)}},execute:function(){LOG.logMessages("In event handler Execute method,raising the request "),this.request=new feba.js.ajax.ajaxRequest(this.options)},handler:function(){LOG.logMessages("In handler method rpcRequest, response is set to target ");var t=this.parser.exceptionType;if("BE"===t||"BC"===t)return void this.extendedhandler();var e=feba.domManipulator.getElementOfClass("modalCloseImg");e&&(delete feba.features.MODAL_VIEW_CONTAINER,feba.domManipulator.trigger(e,"click")),this.content=this.parser.content;var s=this.target,o=this.content[0][1],n=this.content[1][1],i=this.groupletId,a=this.displayExceptions;if("BI"===t?LIB.__HANDLE_ERROR__(this.riaFeatureID,o,n,i,a,!0,this.source):this.handleErrors(o,n,i,a),"0000"===String(this.parser.content[2][1])){var r=this.content[4][1],l="",p="",h=this.content.length;if(null==s||0==s.length||-1==s.indexOf(",")&&-1==s.indexOf("="))s=LIB.__GET_DOM__(this.target),null!=s&&r==this.requestId&&(s.type==Constants.TEXTFIELD?s.value=this.content[5][1]:s.innerHTML=this.content[5][1]);else{l=s.split(",");for(var d=l.length,u=0;d>u;u++){if(-1==l[u].indexOf("="))throw new Error("Target pattern not proper");if(p=l[u].split("="),2!=p.length)throw new Error("Target pattern not proper");if(s=LIB.__GET_DOM__(p[0]),!s)throw new Error("No Target");if(r==this.requestId)for(var c=5;h>c;c++)p[1]==this.content[c][0]&&(s.type==Constants.TEXTFIELD?s.value=this.content[c][1]:s.innerHTML=this.content[c][1])}}}},toString:function(){return this.name+LIB.__TO_STRING__(this.options)}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.select",{},{init:function(t){this.name="feba.js.ajax.select",LOG.logMessages("Initializing the JavaScriptObject "),feba.js.ajax.add(this),this.version="1.0",this.description="",this.setOptions(t),this.setListeners();var e=!1;switch(LIB.__GET_DOM__(this.options.source).type){case Constants.SIMPLE_SELECT:case Constants.HIDDEN:case Constants.TEXTFIELD:feba.domManipulator.hasValueForId(this.options.source)&&(e=!0);break;case Constants.CHECKBOX:case Constants.RADIO:"true"==LIB.__GET_DOM__(this.options.source).checked&&(e=!0)}"false"!=this.options.executeOnLoad&&e&&this.execute()},setOptions:function(t){this.options=feba.domManipulator.extendObject({parameters:"",emptyOptionValue:"",emptyOptionName:"",defaultOptions:"",eventType:"change",parser:new LIB.Parser(Constants.JSON),handler:this.handler,requestId:0,child:this,selectValue:"select|"},t||{}),this.options.handleErrors=this.handleErrors,LOG.logMessages("In SetOptions method , options are set"),this.setAjaxHandlerFunctions(),this.options.child=this},setListeners:function(){var t=this.options,e=feba.domManipulator.getElementById(t.source);if(e){var s=this;feba.domManipulator.bind(e,t.eventType,{},function(){s.execute.apply(s)}),LOG.logMessages("In SetListeners method, eventListener has been added to element",t.source,"with event Type",t.eventType)}},removeListeners:function(){var t=this.options,e=LIB.__GET_DOM__(t.source);e&&(e["on"+t.eventType]="")},execute:function(){LOG.logMessages("In event handler Execute method,raising the request "),checkCanRaiserequest(this.options)&&(this.request=new feba.js.ajax.ajaxRequest(this.options))},handler:function(){LOG.logMessages("In handler method, response is set to target"),this.content=this.parser.content;var t=this.target;try{var e=this.content[0][1],s=this.content[1][1],o=this.groupletId,n=this.displayExceptions;if(this.handleErrors(e,s,o,n),"0000"!==String(this.parser.content[2][1]))return void removeTarget(t);var i=this.content[4][1];if(i!=this.requestId)throw new Error("Outdated request");if(0==t.length)throw new Error("Target pattern not proper");for(var a=t.split(","),r=a.length,l=0;r>l;l++){if(-1==a[l].indexOf("="))throw new Error("Target pattern not proper");var p=a[l].split("=");if(2!=p.length)throw new Error("Target pattern not proper");if(t=LIB.__GET_DOM__(p[0]),!t)throw this.stop(),this.removeListeners(),new Error("target lost");updateTargetElement(t,this.content,p[1],this.selectValue);var h=p[0];h.substring(h.indexOf(".")+1);try{jQuery(document.getElementById(h)).resetSS(),jQuery(document.getElementById(h)).focus()}catch(d){LOG.logMessages("Error on invocation of stylish select plugin : "+d)}}}catch(d){t.options.length=0,t.disabled=!1}},toString:function(){return this.name+LIB.__TO_STRING__(this.options)}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.updateField",{},{
init:function(t){this.name="feba.js.ajax.updateField",this.version="1.0",this.description="",LOG.logMessages("Initializing the JavaScriptObject "),feba.js.ajax.add(this),this.setOptions(t),this.setListeners(),feba.js.ajax.add(this)},setOptions:function(t){this.options=feba.domManipulator.extendObject({parameters:"",eventType:"click",parser:null==t.parser?new LIB.Parser(Constants.JSON):t.parser,handler:this.handler,type:"post",selectValue:"select|",child:this,requestId:0},t||{}),this.options.handleErrors=this.handleErrors,this.setAjaxHandlerFunctions(),this.options.child=this,LOG.logMessages("In SetOptions method , options are set")},setListeners:function(){var t=this.options,e=t.action,s=feba.domManipulator.getElementById(t.action),o=this;if(0!==s.length){var n=this.options.source;LIB.__GET_DOM__(n)||(n=this.options.action),!feba.domManipulator.hasValue(s)||LIB.__GET_DOM__(n).type==Constants.RADIO&&1!=LIB.__GET_DOM__(n).checked?(this.options.source=e,checkCanRaiserequest(this.options),feba.domManipulator.bind(s,t.eventType,{},function(){o.execute.apply(o)})):(feba.domManipulator.bind(s,t.eventType,{},function(){o.execute.apply(o)}),this.options.executeOnLoad=!0,o.execute.apply(o))}else o.execute.apply(o);LOG.logMessages("In SetListeners method, eventListener has been added to element")},execute:function(){LOG.logMessages("In event handler Execute method,raising the request ");var t=this.options.source;LIB.__GET_DOM__(t)||(this.options.source=this.options.action),checkCanRaiserequest(this.options)&&(this.options.source=t,this.request=new feba.js.ajax.ajaxRequest(this.options))},handler:function(){LOG.logMessages("In handler method, response is set to target"),this.content=this.parser.content;var t=this.target,e=this.content[0][1],s=this.content[1][1],o=this.groupletId,n=this.displayExceptions;if(this.handleErrors(e,s,o,n),"0000"!==String(this.parser.content[2][1]))return void removeTarget(t);var i=this.content[4][1];if(i!=this.requestId)throw new Error("Outdated request");var a="",r="";this.content.length;if(0==t.length||-1==t.indexOf(",")&&-1==t.indexOf("=")){var l=feba.domManipulator.getElementById(this.target);if(0===l.length)throw new Error("No Target");t=feba.domManipulator.getElementById(this.target)+"> div",LIB.__ADD_POLITE_LIVE_REGION__(t),0===t.length&&(l.append("<div></div>"),t=feba.domManipulator.getIdWithAppend(this.target,"> div"),t=jQuery('[id="'+this.target+'"] > div')),(void 0===requestId||requestId==this.requestId)&&(feba.domManipulator.getAttribute(t,"type")==Constants.TEXTFIELD?feba.domManipulator.setAttribute(t,"value",this.content[5][1]):"string"==typeof this.content?feba.domManipulator.replaceWith(t,this.content):feba.domManipulator.replaceWith(t,this.content[5][1]))}else{a=t.split(",");for(var p=a.length,h=0;p>h;h++){if(-1==a[h].indexOf("="))throw new Error("Target pattern not proper");if(r=a[h].split("="),2!=r.length)throw new Error("Target pattern not proper");if(t=LIB.__GET_DOM__(r[0]),LIB.__ADD_POLITE_LIVE_REGION__(t),!t)throw new Error("No Target");updateTargetElement(t,this.content,r[1],this.selectValue)}}},toString:function(){return this.name+LIB.__TO_STRING__(this.options)}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.groupletController",{},{init:function(t,e,s){this.execute(t,e,s)},execute:function(t,e,s){for(var o=e.length,n=0;o>n;n++){var i=e[n],a=i.criteria;if(-1!=a.indexOf("{")&&-1!=a.indexOf("}")){var r=a.substring(a.indexOf("{")+1,a.indexOf("}")),l=feba.domManipulator.getGroupletSpecificElementValue(r,t.target);a=a.substring(0,a.indexOf("=")+1)+l}var p=i.groupletId;if(feba.features[p].options.parameters=a,"true"===i.isCrossSell){this.options={},this.options.parameters=a,this.options.parameters=this.buildParameterString();var h=AnalyticsEngine.getResponse(this.options.parameters);if(!h)return;feba.features[p].options.parameters=h}feba.features[p].options.parameters="MenuOptionFG.DYNAMIC_ATTRIBUTES=";var d="";a&&(d+=a),s&&(d.length>0&&(d+=Constants.DYNAMIC_ATTR_SEPERATOR),d+=s),d=d.split(Constants.ASSIGNMENT).join(Constants.PIPE),feba.features[p].options.parameters+=d+Constants.PARAMETERS_SEPERATOR+Constants.IS_CSW_REQUEST+"=Y",feba.features[p].options.groupletParameters=null,feba.features[p].options.baseUrl=feba.features[p].options.originalURL,"null"!=i.baseURL&&""!=i.baseURL&&(feba.features[p].options.baseUrl=i.baseURL),feba.features[p].options.isIGC="Y",this.block(p),feba.features[p].execute.call(feba.features[p])}},block:function(t){var e=feba.domManipulator.getElementById(feba.features[t].options.target);e.block({message:Constants.PROCESSING_MESSAGE,css:{border:"1px solid",background:"white url(consumer/images/spinner.gif) 50% center no-repeat",backgroundColor:"#f00",height:"15%"}})},toString:function(){return this.name+LIB.__TO_STRING__(this)}}),feba.js.ajax.base.extend("feba.js.ajax.modalView",{},{init:function(t){this.name="feba.js.ajax.modalView",this.version="1.0",this.description="",LOG.logMessages("Initializing the JavaScriptObject "),feba.js.ajax.add(this),this.setOptions(t),this.setListeners(),this.extendedOptions={},this.passedOptions=t,this.setAjaxHandlerFunctions(),this.options.executeOnLoad&&this.execute()},setOptions:function(t){this.options=jQuery.extend({parser:new LIB.Parser("html"),handler:this.handler,requestId:0,uiBlocked:!1,type:"post",handleCloseAction:this.handleCloseAction,paintExceptionOnPage:t.paintExceptionOnPage||"true",child:this,listenersReqd:!0},t||{}),this.options.isFirstExecution=!0,LOG.logMessages("In SetOptions method , options are set"),this.options.originalUrl=this.options.baseUrl,this.options.originalParams=this.options.criteria||this.options.parameters,this.options.handleCloseAction=this.handleCloseAction,this.options.handleErrors=this.handleErrors,this.options.modalDataId="MODAL_VIEW_CONTAINER",this.options.child=this,this.originalOptions=t},onError:function(){feba.domManipulator.getElement(".ui-dialog-titlebar-close").show()},executeEvent:function(){if(this.modalObj.options.originalParams&&-1!=this.modalObj.options.originalParams.indexOf("[]")){var t=this.modalObj.options.originalParams.replace(/\[\]/g,"["+this.currentIndex+"]");this.modalObj.options.parameters?this.modalObj.options.parameters=t:this.modalObj.options.criteria=t}else this.modalObj.options.parameters="";if(this.modalObj.options.indexFieldName){var e=parseInt(this.currentIndex)+1,s=this.modalObj.options.indexFieldName+"="+e;this.modalObj.options.parameters?this.modalObj.options.parameters=this.modalObj.options.parameters+","+s:this.modalObj.options.criteria?this.modalObj.options.criteria=this.modalObj.options.criteria+","+s:this.modalObj.options.parameters=s,this.modalObj.options.appendTo&&(this.modalObj.options.appendTo=this.modalObj.options.appendTo.replace(/\[\d*\]/,"["+parseInt(this.currentIndex)+"]"))}this.modalObj.options.groupletParameters=this.modalObj.options.parameters,this.modalObj.options.actionElement="load",this.modalObj.options.baseUrl=this.modalObj.options.originalUrl;var o=feba.features.MODAL_VIEW_CONTAINER=new feba.js.ajax.modalView(this.modalObj.options);o.extendedOptions=this.modalObj.extendedOptions,o.execute()},execute:function(){var t=feba.domManipulator.getElementById(this.options.modalDataId);0==t.length&&"Y"!=this.options.isModalCloseEvent&&(LIB.__CREATE_DIALOG__(this),this.options.modalDialog.dialog("open")),this.showModalWithProcessing(),LOG.logMessages("In event handler Execute method,raising the request "),this.setCloseActions(),this.request=new feba.js.ajax.ajaxRequest(this.options)},showModalWithProcessing:function(){feba.domManipulator.getElement(".ui-dialog-titlebar-close").hide();var t=feba.domManipulator.getElementById(this.options.modalDataId);t.children().remove();var e=feba.domManipulator.getElementById(this.options.processingDivId);0==e.length&&t.append('<div id="'+this.options.processingDivId+'"/>');try{LOG.logMessages("shows the loader images while request is getting processed "),feba.domManipulator.setCssProperties(feba.domManipulator.getElementById(this.options.processingDivId),{backgroundImage:"url("+imagePath+"/widget-loading.gif)",backgroundRepeat:"no-repeat",backgroundPosition:"center",height:this.options.height||"450px",width:this.options.width||"450px"})}catch(s){}},handleCloseAction:function(){this.content=this.parser.content;var t=this.target,e=(this.content[0][1],this.content[1][1],this.groupletId,""),s="",o=this.content.length;if(null==t||0==t.length||-1==t.indexOf(",")&&-1==t.indexOf("="))t=LIB.__GET_DOM__(this.target),null!=t&&(t.type==Constants.TEXTFIELD?t.value=this.content[5][1]:t.innerHTML=this.content[5][1]);else{e=t.split(",");for(var n=e.length,i=0;n>i;i++)if(-1!=e[i].indexOf("=")&&(s=e[i].split("="),2==s.length)){if(t=LIB.__GET_DOM__(s[0]),!t)return;for(var a=5;o>a;a++)s[1]==this.content[a][0]&&(t.type==Constants.TEXTFIELD?t.value=this.content[a][1]:t.innerHTML=this.content[a][1])}}},handler:function(){LOG.logMessages("In handler method modalView, response is set to target "),feba.domManipulator.unblockUI(),this.content=this.parser.content,feba.features.MODAL_VIEW_CONTAINER.options.originalContent=this.content;var t=feba.domManipulator,e=this.parser.exceptionType,s="BE"===e||"BC"===e||"CE"===e||!1,o=t.getElementById(this.modalDataId),n=this.modalDialog?this.modalDialog:o.parent(),i=this.XMLHttpRequest.getResponseHeader("action"),a=this.XMLHttpRequest.getResponseHeader("parentViewId");if("Y"==this.isModalCloseEvent&&"REFRESH"!=i)return n.dialog("destroy"),void delete feba.features.MODAL_VIEW_CONTAINER;if(0!=o.length||null!=i&&void 0!=i)if(null==s||null==i||this.isFirstExecution){if(this.isFirstExecution&&(this.isFirstExecution=!1,s&&("true"==a||"true"==this.paintExceptionOnPage||1==this.paintExceptionOnPage))){n.dialog("close"),feba.domManipulator.getElementById("modalDialog").remove();var r=t.find(t.getElement(this.content),"#MessageDisplay_TABLE"),l=this.__GROUPLET_ID__?this.__GROUPLET_ID__:this.groupletId;return void this.handleErrors(r.wrap("<p/>").parent()[0].innerHTML,null,l,!0)}0==n.dialog("isOpen")&&n.dialog("open"),o.children().remove(),o.append(this.content)}else{if(n.dialog("close"),feba.domManipulator.getElementById("modalDialog").remove(),"UPDATE"==i)this.handleCloseAction();else if("REFRESH"==i)if(this.groupletId&&null!=this.groupletId)feba.features[this.groupletId].options.updateParentAction=!0,feba.features[this.groupletId].setResponse(feba.features[this.groupletId].options,this.content,this.requestId,"",this.groupletId);else{this.contentScripts=this.content.match(new RegExp("<script[^>]*>([\\S\\s]*?)</script>","img")),this.content=this.content.replace(new RegExp("<script[^>]*>([\\S\\s]*?)</script>","img"),""),jQuery("body")[0].innerHTML=this.XMLHttpRequest.responseText;var p=this.contentScripts.length,h=jQuery("div:last");this.groupletId&&(h=t.getElementById(this.groupletId)),window.ajaxPageRefresh="true";for(var d=0;p>d;d++)try{h.append(this.contentScripts[d])}catch(u){}}this.child.setOptions(this.child.passedOptions),this.groupletId&&null!=this.groupletId&&"null"!=this.groupletId&&handleTargetGrouplets(feba.features[this.groupletId].options)}else if(s){var r=t.find(t.getElement(this.content),"#MessageDisplay_TABLE"),l=this.__GROUPLET_ID__?this.__GROUPLET_ID__:this.groupletId;"true"==this.paintExceptionOnPage?this.handleErrors(r.wrap("<p/>").parent()[0].innerHTML,null,l,!0):createModal(this)}else createModal(this);var c=this.parser.title,n=this.modalDialog?this.modalDialog:o.parent();c&&n&&n.dialog("option","title",c),feba.domManipulator.bind(feba.domManipulator.getElement(".ui-dialog-titlebar-close"),"click",{},function(t){var e=feba.features.MODAL_VIEW_CONTAINER.options;e.isModalCloseEvent="Y",e.groupletParameters=e.groupletParameters+"&IS_MODAL_CLOSE_EVENT=Y",null!=e.additionalParamsForClose&&(e.additionalParamsForClose=e.additionalParamsForClose.replace(/\&amp\;/g,"&"),e.groupletParameters=e.groupletParameters+"&"+e.additionalParamsForClose),e.baseUrl=e.CLOSE_URL,feba.features.MODAL_VIEW_CONTAINER.execute(),t.preventDefault(),t.stopImmediatePropagation()}),void 0!=this.abortEvent&&null!=this.abortEvent&&feba.domManipulator.getElement(".ui-dialog-titlebar-close").show(),this.isFirstExecution&&(this.isFirstExecution=!1)},toString:function(){return this.name+LIB.__TO_STRING__(this.options)},setListeners:function(){var t=this.options,e=t.source;if(null!=e)if(-1!=e.indexOf("[]")){if(!t.startIndex||!t.endIndex)throw new Error("startIndex,endIndex should be passed");for(var s=[],o=t.startIndex;o<t.endIndex;o++){s[o]=new Object,s[o].modalObj=this;var n=e.replace("[]","["+o+"]");s[o].currentIndex=o;var i=feba.domManipulator.getElementById(n);if(i){var a=this;feba.domManipulator.bind(i,t.eventType,{currentIndex:o},function(t){return a.executeEvent.apply(s[t.data.currentIndex]),t.stopImmediatePropagation(),t.preventDefault(),!1})}}}else{var s=new Object;s.modalObj=this;var i=feba.domManipulator.getElementById(t.source);if(i.length){var a=this;feba.domManipulator.bind(i,t.eventType,{},function(t){var e=feba.features.MODAL_VIEW_CONTAINER=new feba.js.ajax.modalView(a.options);return e.extendedOptions=a.extendedOptions,t.stopImmediatePropagation(),t.preventDefault(),e.execute(),!1})}}},setCloseActions:function(){options=this.options,options.actionElement==this.extendedOptions.refreshElement&&this.extendedOptions.refreshEvent?options.groupletParameters=options.groupletParameters+"&MODAL_REFRESH_ACTIONS="+this.extendedOptions.refreshEvent:options.actionElement==options.refreshElement&&options.refreshEvent?options.groupletParameters=options.groupletParameters+"&MODAL_REFRESH_ACTIONS="+options.refreshEvent:this.extendedOptions.refresh?options.groupletParameters=options.groupletParameters+"&MODAL_REFRESH_ACTIONS="+this.extendedOptions.refresh:options.refresh&&(options.groupletParameters=options.groupletParameters+"&MODAL_REFRESH_ACTIONS="+options.refresh),options.actionElement==this.extendedOptions.updateElement&&this.extendedOptions.updateEvent?options.groupletParameters=options.groupletParameters+"&MODAL_CLOSE_ACTIONS="+this.extendedOptions.updateEvent:options.actionElement==options.updateElement&&options.updateEvent?options.groupletParameters=options.groupletParameters+"&MODAL_CLOSE_ACTIONS="+options.updateEvent:this.extendedOptions.update?options.groupletParameters=options.groupletParameters+"&MODAL_CLOSE_ACTIONS="+this.extendedOptions.update:options.update&&(options.groupletParameters=options.groupletParameters+"&MODAL_CLOSE_ACTIONS="+options.update)}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.GeoTagging",{},{init:function(t){this.name="feba.js.ajax.GeoTagging",this.version="1.0",this.description="",LOG.logMessages("Initializing the JavaScriptObject "),feba.js.ajax.add(this),this.setOptions(t),this.execute()},setOptions:function(t){this.options=feba.domManipulator.extendObject({latitude:this.latitude,longitude:this.longitude,accuracy:this.accuracy,handler:this.handler,requestId:0},t||{}),this.options.handleErrors=this.handleErrors,LOG.logMessages("In SetOptions method , options are set")},handler:function(){},execute:function(){resultlist=new Array;var t=this.options.parameters,e=new Array;e=t.split("&"),t=e[0].substring(e[0].indexOf("=")+1,e[0].length);var s=e[1].substring(e[1].indexOf("=")+1,e[1].length);"GeoService"==s?resultlist=getGeoLocationService(this.options,t):"GeoHtml"==s?resultlist=getGeoLocationHTML5(this.options,t):"GeoBoth"==s&&(resultlist=getGeoLocationService(this.options,t),resultlist=getGeoLocationHTML5(this.options,t))},toString:function(){return this.name+LIB.__TO_STRING__(this.options)}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.modalBoxRequest",{},{init:function(t){this.name="feba.js.ajax.modalBoxRequest",this.version="1.0",console.log(t.baseUrl),this.description="",LOG.logMessages("Initializing the JavaScriptObject "),feba.js.ajax.add(this),this.setOptions(t),this.originalOptions=t,this.setListeners(),this.options.executeOnLoad&&this.execute()},setOptions:function(t){this.options=feba.domManipulator.extendObject({parser:new LIB.Parser("html"),handler:this.handler,requestId:0,evalScripts:!0,type:"post",isGrouplet:!0},t||{}),LOG.logMessages("In SetOptions method , options are set"),this.options.originalUrl=this.options.baseUrl,this.options.originalParams=this.options.criteria||this.options.parameters,this.options.handleErrors=this.handleErrors},execute:function(){LOG.logMessages(this,"In event handler Execute method,raising the request "),0===this.options.requestId&&(LIB.__CREATE_DIALOG__(this),this.options.modalDialog.dialog("open"),this.options.modalDialog.hide()),this.request=new feba.js.ajax.ajaxRequest(this.options)},handler:function(){LOG.logMessages("In handler method modalBox, response is set to target "),this.content=feba.domManipulator.getElement(this.parser.content),contentLength=this.content.length,this.contentScripts=this.parser.content.match(new RegExp("<script[^>]*>([\\S\\s]*?)</script>","img"));for(var t=0;t<contentLength;t++){var e=feba.domManipulator.getAttribute(this.content[t],Constants.GROUPLET_ID_ATTR);if(e){var s=feba.domManipulator.getElementById(e.toUpperCase()),o=feba.domManipulator.getChildren(s);o&&feba.domManipulator.remove(o),this.modalDialog.show(),feba.domManipulator.append(this.dialogContent,this.content[t]);var n=this.contentScripts.length;s=feba.domManipulator.getElementById(e.toUpperCase());for(var i=0;n>i;i++)0!=s.length&&feba.domManipulator.append(s,this.contentScripts[i])}}this.requestId=this.requestId+1,feba.domManipulator.getElementOfClass("ui-dialog-titlebar-close").focus()},toString:function(){return this.name+LIB.__TO_STRING__(this.options)}}),feba.js.ajax.base.extend("feba.js.ajax.febaCalendar",{},{init:function(t){this.name="feba.js.ajax.febaCalendar",this.version="1.0",this.description="",LOG.logMessages("Initializing the JavaScriptObject "),feba.js.ajax.add(this),this.setOptions(t),this.options.listenersReqd?this.setListeners():void 0,this.extendedOptions={},this.passedOptions=t,this.options.executeOnLoad&&this.execute()},setOptions:function(t){this.options=jQuery.extend({parser:new LIB.Parser("html"),handler:this.handler,requestId:0,flowCompleted:this.flowCompleted,uiBlocked:!1,type:"post",modalCloseAction:this.modalCloseAction,listenersReqd:!0},t||{}),LOG.logMessages("In SetOptions method , options are set"),this.options.originalUrl=this.options.baseUrl,this.options.originalParams=this.options.criteria||this.options.parameters,this.options.handleErrors=this.handleErrors,this.options.isCalendar=Constants.TRUE,this.options.modalDataId="MODAL_VIEW_CONTAINER",this.options.child=this,this.options.handleCloseActions&&(this.options.revertAction=this.options.handleCloseActions)},executeEvent:function(){if(this.modalObj.options.originalParams&&-1!=this.modalObj.options.originalParams.indexOf("[]")){var t=this.modalObj.options.originalParams.replace(/\[\]/g,"["+this.currentIndex+"]");this.modalObj.options.parameters?this.modalObj.options.parameters=t:this.modalObj.options.criteria=t}else this.modalObj.options.parameters="";if(this.modalObj.options.indexFieldName){var e=parseInt(this.currentIndex)+1,s=this.modalObj.options.indexFieldName+"="+e;this.modalObj.options.parameters?this.modalObj.options.parameters=this.modalObj.options.parameters+","+s:this.modalObj.options.criteria?this.modalObj.options.criteria=this.modalObj.options.criteria+","+s:this.modalObj.options.parameters=s}this.modalObj.options.groupletParameters=null,this.modalObj.options.actionElement="load",this.modalObj.options.baseUrl=this.modalObj.options.originalUrl,this.modalObj.execute.call(this.modalObj)},execute:function(){if(LOG.logMessages("In event handler Execute method,raising the request "),this.options.flowCompleted=!1,this.options.uiBlocked||(feba.domManipulator.blockUI({message:feba.domManipulator.getElementById("loadingImage"),baseZ:950,allowBodyStretch:!1,overlayCSS:{backgroundColor:"#000000",opacity:.4}}),this.options.uiBlocked=!0),null!=this.options.actionElement){if(null!=this.options.closeAction)for(var t=this.options.closeAction.split(","),e=t.length,s=0;e>s;s++){if(null!=this.options.revertAction&&this.options.revertAction==this.options.actionElement&&t[s]==this.options.actionElement)return void this.handleRevertActions();t[s]==this.options.actionElement&&(this.options.flowCompleted=!0)}if(null!=this.options.revertAction&&this.options.revertAction==this.options.actionElement)return this.handleRevertActions(),void(this.extendedOptions.errorCallback&&this.extendedOptions.errorCallback());null!=this.options.conditionalCompleteAction&&this.options.conditionalCompleteAction==this.options.actionElement&&(this.options.flowCompleted=!0)}this.setOptions(jQuery.extend(!0,{},this.options,this.extendedOptions)),this.request=new feba.js.ajax.ajaxRequest(this.options)},handleRevertActions:function(){var t=this,e=feba.domManipulator,s=this.options.modalDataId,o={target:t.options.target,executeOnLoad:!0,type:"post",baseUrl:t.options.baseUrl,groupletParameters:this.options.groupletParameters,changeParser:!0,success:function(){var s=this.options.parser.exceptionType||this.request.options.parser.exceptionType,o="BE"===s||"BC"===s||!1;if(!o){t.flowCompleted=!1;var n=e.getElementOfClass("modalCloseImg");e.trigger(n,"click"),t.options.modalCloseAction()}},extendedhandler:function(){var t=this.parser.exceptionType,e="BE"===t||"BC"===t||!1;if(e){var o=feba.domManipulator,n=o.getElementById(s);n.children().remove(),n.append(this.child.options.parser.content);var i=o.getElementOfClass("modalCloseImg");o.hideElement(i[0])}}};o.groupletParameters=o.groupletParameters.replace("&__RIA__=MODAL_VIEW","&__RIA__=RPC_REQUEST"),o.groupletParameters+="&__ALLOW_CHANGE_OPFMT__=Y&__RIA_ACT_AS_REQUEST__=MODAL_VIEW",o.groupletParameters=o.groupletParameters+(this.options.targetsRequired?"&__TARGETS_REQUIRED__="+this.options.targetsRequired:"");new feba.js.ajax.rpcRequest(o);t.setOptions(t.passedOptions)},handler:function(){LOG.logMessages("In handler method modalView, response is set to target "),feba.domManipulator.unblockUI(),this.content=this.parser.content;var t=feba.domManipulator,e=this.parser.exceptionType,s="BE"===e||"BC"===e||!1,o=t.getElementById(this.modalDataId),n={title:this.title,dataId:this.modalDataId,close:!0,escClose:!1,appendTo:"form",autoPosition:!0,maxHeight:"80%",minHeight:63,maxWidth:"80%"};if(0==o.length)if(s){t.modal(t.find(t.getElement(this.content),"#MessageDisplay_TABLE"),n);var i=this;i.flowCompleted=!1,i.uiBlocked=!1,t.click(t.getElementOfClass("modalCloseImg"),function(){i.modalCloseAction()})}else{this.contentScripts=this.content.match(new RegExp("<script[^>]*>([\\S\\s]*?)</script>","img")),this.content=this.content.replace(new RegExp("<script[^>]*>([\\S\\s]*?)</script>","img"),""),t.modal(this.content,{title:this.title,dataId:this.modalDataId,close:!0,escClose:!1,autoPosition:!0,appendTo:"form",minHeight:this.height||300,minWidth:this.width||500,maxHeight:"80%",maxWidth:"80%"});var a=this.contentScripts.length;o=t.getElementById(this.modalDataId);for(var r=0;a>r;r++)0!=o.length&&o.append(this.contentScripts[r]);var l=t.getElementOfClass("modalCloseImg");t.hideElement(l[0])}else if(this.flowCompleted&&!s){var i=this,l=t.getElementOfClass("modalCloseImg");i.child.options.showSuccessMessage?(t.trigger(l,"click"),setTimeout(function(){t.modal(t.find(t.getElement(i.content),"#MessageDisplay_TABLE"),n),t.click(t.getElementOfClass("modalCloseImg"),function(){i.modalCloseAction()})},500)):(t.click(l,function(){i.modalCloseAction()}),t.trigger(l,"click")),i.child.setOptions(i.child.passedOptions)}else{o.children().remove(),o.append(this.content);var l=t.getElementOfClass("modalCloseImg");t.hideElement(l[0])}},modalCloseAction:function(){this.uiBlocked=!1,this.flowCompleted?this.successCallback&&this.successCallback():this.errorCallback&&this.errorCallback()},toString:function(){return this.name+LIB.__TO_STRING__(this.options)}}),feba.domManipulator.createChildClass(feba.js.ajax.base,"feba.js.ajax.dynamic",{},{init:function(t){switch(this.name="feba.js.ajax.dynamic",LOG.logMessages("Initializing the JavaScriptObject "),feba.js.ajax.add(this),this.version="1.0",this.description="",this.setOptions(t),this.setListeners(),feba.domManipulator.getType(this.options.source)){case"select-one":feba.domManipulator.hasValueForId(this.options.source)&&(this.options.executeOnLoad=!0);break;case"checkbox":feba.domManipulator.isChecked(this.options.source)&&(this.options.executeOnLoad=!0)}this.options.executeOnLoad&&this.execute()},setOptions:function(t){this.options=feba.domManipulator.extendObject({parameters:"",eventType:"change",parser:new LIB.Parser(Constants.JSON),handler:this.handler,child:this,requestId:0},t||{}),this.options.handleErrors=this.handleErrors,this.setAjaxHandlerFunctions(),this.options.child=this,LOG.logMessages("In SetOptions method , options are set")},setListeners:function(){var t=this.options,e=feba.domManipulator.getElementById(t.source);if(e){var s=this;feba.domManipulator.bind(e,t.eventType,{},function(){s.execute.apply(s)}),LOG.logMessages("In SetListeners method, eventListener has been added to element",t.source,"with event Type",t.eventType)}},execute:function(){LOG.logMessages("In event handler Execute method,raising the request "),checkCanRaiserequest(this.options)&&(this.request=new feba.js.ajax.ajaxRequest(this.options))},handler:function(options){function drawTargetElement(target,content,targetElement,targetType){var source=feba.domManipulator.getElementById(options.source);if(!source)throw new Error("Source is not Proper");var parent=feba.domManipulator.parent(feba.domManipulator.parent(source)),contentLen=content.length;if(removeChildNodesOfTarget(parent,target),0!=contentLen&&0!=feba.domManipulator.getAttribute(source,"checked")){for(var targetContent=null,contentSet=null,k=0;contentLen>k;k++)null!=content[k][0]&&content[k][0].match(Constants.TARGET_LITERAL)&&(targetContent=content[k][1]),null!=content[k][0]&&content[k][0].match(targetElement)&&(contentSet=content[k][1]);var tableproperties=new Object({targetName:target,no_of_columns:options.columnCount,inputType:targetType});if(options.style){for(var params=options.style.split(Constants.COMMA),map=new Object,i=0;i<params.length;i++){var parts=params[i].split(Constants.COLON);if(2!=parts.length)throw new Error("style pattern not proper");map[parts[0]]=parts[1]}feba.domManipulator.extendObject(tableproperties,map)}var spanId=Constants.SPAN+target,spanElement=feba.domManipulator.createSpanElement(spanId),labelElement=feba.domManipulator.createLabelElement(map.caption_style,options.caption);if(feba.domManipulator.setAttribute(labelElement,"style","display:block"),feba.domManipulator.appendChild(spanElement,labelElement),content)if("yes"==options.displayInTable){var table=feba.domManipulator.createTable(tableproperties,contentSet,targetContent);feba.domManipulator.appendChild(spanElement,table)}else{var selectedValues=feba.domManipulator.getSelectedValues(target,targetContent),childSpan=feba.domManipulator.createSpanElement();feba.domManipulator.appendChild(spanElement,childSpan),feba.domManipulator.each(contentSet,function(t,e){var s=feba.domManipulator.createParaElement(),o=feba.domManipulator.createDynamicElement(e,target,targetType,selectedValues);feba.domManipulator.addClass(o,tableproperties.element_style),feba.domManipulator.appendChild(s,o),feba.domManipulator.appendChild(childSpan,s)})}for(var ancestor=feba.domManipulator.parent(feba.domManipulator.getElement(parent)),i=0;3>i;i++)feba.domManipulator.appendChild(ancestor,feba.domManipulator.createBreakElement());feba.domManipulator.appendChild(ancestor,spanElement);var tarArray=feba.domManipulator.getElementByName(target);loadFunction=function(){var code="myFunc = "+options.functionName;return eval(code)},feba.domManipulator.bind(tarArray,options.eventType,"",loadFunction())}}function removeChildNodesOfTarget(t,e){var s=Constants.SPAN+e,o=feba.domManipulator.getElementById(s);o&&feba.domManipulator.parent(o)==feba.domManipulator.parent(t)&&feba.domManipulator.remove(o);var n=feba.domManipulator.children(feba.domManipulator.getElement(feba.domManipulator.parent(t)));feba.domManipulator.each(n,function(t,e){"BR"==e.tagName&&feba.domManipulator.remove(feba.domManipulator.getElement(e))})}options.content=options.parser.content;var target=options.target;try{var targetElementArray="",notProperTarget=0==target.length||-1==target.indexOf(Constants.ASSIGNMENT);if(notProperTarget)throw new Error("Target pattern not proper");if(targetElementArray=target.split(Constants.ASSIGNMENT),2!=targetElementArray.length)throw new Error("Target pattern not proper");target=targetElementArray[0],drawTargetElement(target,this.content,targetElementArray[1],this.targetType)}catch(e){removeChildNodesOfTarget(parent,target)}},toString:function(){return this.name+LIB.__TO_STRING__(this.options)}});