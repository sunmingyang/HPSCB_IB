!function(n){n.fn.FEBAAccordion=function(e){function t(e,t){n(e||s).children(a.content).length>0?n(e||s).children(a.content).slideUp(a.speed,function(){s.trigger("onclose",e),e?n(e).data("open",!1).removeClass(a.open):s.find(a.node).data("open",!1).removeClass(a.open),t()}):(n(e).removeClass(a.open),s.trigger("onclose",e),t()),o(e,!1)}function o(e,t){for(var o=0;o<a.update.length;o++)n(a.update[o].selector,e).html(a.update[o].text[t?0:1]).click(function(n){n.preventDefault()})}function i(e){return n(e).data("open")||(n(e).addClass(a.open),s.trigger("onopen",e)),n(e).data("open",!n(e).data("open")),n(e).children(a.content).length>0&&(n(e).data("open")?n(e).children(a.content).slideDown(a.speed,function(){n("*",e).css({height:""})}):n(e).children(a.content).slideUp(a.speed,function(){n(e).data("open")||(n(e).removeClass(a.open),s.trigger("onclose",e))})),o(e,open),open}var s=n(this),c={node:"div.node",heading:"h2",content:"div.content",open:"open",speed:"normal",update:[],forceClose:!0,blockLinks:!0},a=n.extend(c,e);return n(this).each(function(){var e=n(this).children(a.node),r=null,d=!1;e=e.filter(function(){return d=n(this).find(c.content).length,d||n(this).addClass("leftnav-nochild"),d}),n(this).bind("close",function(n,e){t(e,function(){o(e,!0),r=null})}),n(this).bind("open",function(t,o){var s=e||n(o);s.each(function(){n(this).data("open")||i(this)&&(r=this)})}),e.each(function(){var e=this;!n(this).hasClass(a.open)||r&&a.forceClose?(n(this).removeClass(a.open),n(this).children(a.content).hide(),o(e,!1),setTimeout(function(){s.trigger("onclose",e)},0),n(this).data("open",!1),n(this).data("closed",!0)):(r=e,o(e,!0),setTimeout(function(){s.trigger("onopen",e)},0),n(this).data("open",!0),n(this).data("closed",!1)),n(a.content,e).css("position","relative"),n(this).children(a.heading).css({cursor:"pointer"}).click(function(c){var d=n(this).attr("nodeName").toLowerCase(),l=n(this).attr("type");if("label"==d)return n("#"+n(this).attr("htmlFor")).click(),!1;if(r&&r!=e&&a.forceClose)t(r,function(){i(e)&&(r=e)});else{if(r&&"radio"==s.find(a.heading).attr("type"))return;i(e)&&(r=e,o(e,!0))}return"a"==d||"input"==d&&"submit"==l?!1:!1}).find("a").each(function(){a.blockLinks&&n(this).click(function(n){n.preventDefault()})})})})}}(jQuery);